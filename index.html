<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <table>
    <p id="background-image">
    </p>
    <td>
      <tr>
        <P id="back2">
        </P>
        <P id="backbtn">
        </P>
        <P id="startbtn">
          Start
        </P>
        <P id="stopbtn">
          Stop
        </P>
      </tr>
      <tr>
        <input id="textfield" placeholder="Type in your token">
        </input>
        <p id="logs">
        </p>
      </tr>
      <tr>
        <p id="status" class="forbidden">
        </p>
      </tr>
  </table>
</body>
<script>
  var xhttp = new XMLHttpRequest();
  var startbtn = document.getElementById("startbtn");
  var stopbtn = document.getElementById("stopbtn");
  var statusicon = document.getElementById("status")
  var token = document.getElementById("textfield")
  var stopBtnIsClickable = true;
  //setTimeout(function(){ changeText(startbtn, "Start") }, 3000);

  //function changeText(element, text) {
  //  element.innerHTML = text;
  //}

  // 200 = ok
  // 500 = internal error

  startbtn.onclick = function () {
    xhttp.open("GET", "actions/start", true);
    xhttp.send();
    stopBtnIsClickable = false;
    setTimeout(function () {
      stopBtnIsClickable = true;
    }, 7000)
  };

  stopbtn.onclick = function () {
    if (stopBtnIsClickable) {
      xhttp.open("GET", "actions/stop", true);
      xhttp.send();
    }
  };

  var checkStatus = setInterval(function () {
    statusicon.className = "loading"
    xhttp.open("GET", "actions/status", true);
    xhttp.send();
  }, 100);

  xhttp.onreadystatechange = function () {
    if (this.status == 200 && this.responseText == "ok") {
      statusicon.className = "ok"
    } else {
      statusicon.className = "forbidden"
    }
  };
</script>

</html>